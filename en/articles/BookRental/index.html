<!DOCTYPE html><html lang="en,pl"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="T3r1jj"><meta property="og:site_name" content="T3r1jj"><meta property="og:title" content="BookRental project"><meta property="og:type" content="article"><meta property="og:description" content="T3r1jj applications, games and tools"><meta property="og:url" content="http://T3r1jj.github.io/en/articles/BookRental/"><meta property="og:image" content="http://T3r1jj.github.io/logo.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="BookRental project"><meta name="twitter:description" content="T3r1jj applications, games and tools"><meta name="twitter:url" content="http://T3r1jj.github.io/en/articles/BookRental/"><meta name="twitter:image:src" content="http://T3r1jj.github.io/logo.png"><title>BookRental project · T3r1jj</title><meta name="description" content="BookRental project - T3r1jj"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/packages/font-awesome-4.7.0/css/font-awesome.min.css"><link href="https://fonts.googleapis.com/css?family=Aldrich" rel="stylesheet"><link rel="search" type="application/opensearchdescription+xml" href="http://T3r1jj.github.io/atom.xml" title="T3r1jj"><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Article",
    "url": "http://T3r1jj.github.io/en/articles/BookRental/",
    "name": "BookRental project",
    "description": "T3r1jj applications, games and tools",
    "author": {
        "@type": "Person",
        "name": "T3r1jj",
        "url": "https://T3r1jj.github.io",
        "sameAs": ["https://github.com/T3r1jj"],
        "description": "Programmer, developer, freelancer"
        "image": "https://github.com/T3r1jj.png"
    }
}</script></head><body><div class="wrap"><header><a href="/en/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/en/" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/en/archives/" class="nav-list-link">ARCHIVES</a></li><li class="nav-list-item"><a href="/en/support/" class="nav-list-link">SUPPORT</a></li><li class="nav-list-item"><a href="https://github.com/T3r1jj" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/en/atom.xml" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/en/search/" target="_self" class="nav-list-link search"><i class="fa fa-search" aria-hidden="true"></i></a></li><li class="nav-list-item"><select id="lang" onchange="this.options[this.selectedIndex].value &amp;&amp; (window.location = this.options[this.selectedIndex].value);" class="fa"><option value="/en/articles/BookRental/" selected lang="en">ENG</option><option value="/pl/articles/BookRental/" lang="pl">PL</option></select></li></ul></header></div><div class="wrap"><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">BookRental project</h1><div class="post-info">Nov 21, 2017<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><a href="/en/categories/Documentation/" class="post-category">#Documentation</a></div><div class="post-content"><p><a href="https://github.com/T3r1jj/BookRental" target="_blank" rel="external"><strong>BookRental</strong></a> is one of the older projects covering several JEE aspects. Its aim was to create a library management system; namely, management of: books, loans, reservations, users and employees. The application implements more than 20 different business features.
The main technologies used in the project are: Java, JSTL, JSF, PrimeFaces, JPA, JDB. The presentation of the application can be viewed in <a href="/en/galleries/BookRental/">the gallery</a>. At times, it does not look too attractive since it was created at the beginning of learning JEE and web technologies [2015] (check out <a href="https://github.com/T3r1jj/Develog" target="_blank" rel="external">Develog</a> to see the difference).
<a id="more"></a></p>
<p>The features implemented in the application are:</p>
<ol>
<li>Displaying the list of books. Books cart with the possibility of adding and removing books. Book borrow feature.</li>
<li>Book management in the administration panel.</li>
<li>Registration of readers. Confirmation of registration in the administration panel. The ability to log in to your account. Only logged in users can borrow books.</li>
<li>Accounts for rental employees. Employees can manage books, readers and rentals. Employees are managed by an administrator.</li>
<li>Book categories. Categories form multi-level trees. Each book belongs to exactly one category, the ability to browse books by category.</li>
<li>Labels (tags) for books. Each book can be labeled with many labels. Browsing books by labels.</li>
<li>Additional resources for the description of the book, e.g. source codes for programs, samples of music or movies. Each file has its own description. The number of files is not limited.</li>
<li>Searching for books based on the title, author’s name, ISBN and possibly other attributes.</li>
<li>Boolean operators: <em>and</em>, <em>or</em>, <em>not</em>; when searching.</li>
<li>Search history. Each logged in user can save search results in the database to be able to rerun them at other times.</li>
<li>Browsing the reader’s rental archives.</li>
<li>Loan administration. Rental status: book in stock, waiting for pickup (is on the reader’s shelf), loaned out. Manual status change by an employee.</li>
<li>Books stock - automatic status update for borrowing and returning the book.</li>
<li>Ability to subscribe to the queue when the book is currently not in stock (reservation).</li>
<li>Financial penalties for keeping books too long. Blocking rentals when books are not returned and no penalty is paid. The maximum retention time set by the administrator.</li>
<li>Messages editable by the administrator and posted on the main page.</li>
<li>Display of news (several recently added books) on the home page.</li>
<li>Selecting skins (themes) for the user interface.</li>
<li>Additional language version of the user interface.</li>
</ol>
<h2 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h2><p>Due to the selected technologies, the standard application architecture has been used, depicted by the picture below:<br><img src="/images/BookRental/arch.jpg" alt="BookRental architecture"></p>
<center style="margin-top: -1em;"><small>Source: <a href="http://www.thejavageek.com" target="_blank" rel="external">http://www.thejavageek.com</a></small></center>

<p>The application implements the MVC pattern, which is divided into three parts:</p>
<ul>
<li>model (JPA + EJB) - represents data from the database in a logical form, implements business functions;</li>
<li>view (JSF page) - displays model data;</li>
<li>controller (JSF bean) - receives input data from the user, processes it, updates and refreshes the model.</li>
</ul>
<p>Normalized database model (3NF - incomplete, slightly redundant):
<img src="/images/BookRental/db.jpg" alt="Model bazy danych"></p>
<p>Some assumptions that might require explanation:</p>
<ol>
<li>If the book does not have an ISBN number (which happens, but very rarely), it should be given a unique value because the books are distinguished by the ISBN field.</li>
<li>The copies of the same books do not differ in the ISBN (they differ by an id number).</li>
<li>Category, tags and resources (eg files) and reservations in the absence of books in the warehouse are assigned to the ISBN.</li>
<li>Loans and reservations are assigned to the book.</li>
</ol>
<h2 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h2><p>The structure of the project is presented in the figure below:
<img src="/images/BookRental/struct.jpg" alt="Project structure"><br>Each package has a different purpose:</p>
<ul>
<li>entity classes - POJO, pack data retrieved from the database into abstract types such as <em>Book</em>.</li>
<li>session / facade classes - EJB facades, allow communication with a database at a higher level than JDBC. These beans operate on the server side and can be injected into other components. In this case, annotated <code>@Stateless</code>, allow the implementation of reusable services.</li>
<li>controller / jsf classes - JSF view controllers, managed beans <em>(ManagedBean)</em>, with the declared scope, eg <em>SessionScoped, ViewScoped, ApplicationScoped</em>, etc. They store state according to the scope and ensure communication with JSF websites. JSF pages can retrieve the beana state using the expression <code>#{bean.field}</code> (assuming that getters and setters have been implemented).</li>
</ul>
<p>The JSF pages are part of the last layer - the view. The <em>Facelets</em> template system is used to build JSF pages. In the case of this project, an open source PrimeFaces has been chosen - an UI component library. Thanks to this framework, it is possible to easily create a rich user interface.<br><img src="/images/BookRental/view.jpg" alt="View structure (1/2)"></p>
<p><strong>WEB-INF</strong> is a special folder in the application structure that is not publicly available, it is not part of the public document tree. The “view” subfolder in the WEB-INF folder has been separated and there are specific views. Elements with characteristic names such as “Create”, “Edit” or “View” represent windows (dialogs), which through compositions are included in other views (mainly lists) and displayed when the button is clicked. For the user, access to the windows is only available through the views, so they (dialogs) were placed in the WEB-INF folder.</p>
<p>The next elements are <strong>templates</strong>, which also use the composition mechanism and the user should not have access to them. The last component of the WEB-INF folder are the pages to which the user is redirected after logging in. They inform, among others, about the lack of rights to browse the page; blocked or inactive account; as well as about the success of the login or registration process.<br><img src="/images/BookRental/view2.jpg" alt="View structure (2/2)"></p>
<p>Four different templates are attached to pages depending on the logged in user’s (or guest’s) rights. The displayed data format also changes, therefore different views have been created that display data in the form of lists. These views use shared windows declared in the WEB-INF folder.</p>
<h2 id="Additional-info"><a href="#Additional-info" class="headerlink" title="Additional info"></a>Additional info</h2><p>Parts worth attention:</p>
<ul>
<li>passwords <strong>hashed</strong> with SHA-256 hash function, in subsequent versions of the application could be supplemented with salt.</li>
<li><em>OptionsController</em> loads application options from a file on the server (e.g. data related to the maximum rental period or penalty value for the day of delay).</li>
<li><em>AuthorizationFilter</em> - <em>PhaseFilter</em> that supervises access to sites that require specific permissions. It is responsible for redirecting in case of user not being activated or being banned.</li>
<li><em>ThemeSwitcherBean</em> and <em>LanguageSwitcherBean</em> manage selection of language and theme preferences selected by the user as a cookie.</li>
</ul>
<p>The management of the connection to the database is handled by <strong>Glassfish</strong> server. The database type is <strong>Java DB</strong>. Transaction type is <strong>JTA</strong>, <strong>EntityManager</strong> is injected via <code>@PersistenceContext</code>.</p>
<p>After the bean has been constructed, but before its use, the language value will be set (based on a cookie or a previously initiated value if there is no cookie). After changing the language, the text will be loaded from the corresponding <em>Bundle*</em> file from the resources directory.</p>
<p><img src="/images/BookRental/view2.jpg" alt="Cookies with a selected theme and language"></p>
<p>During the implementation of this feature, the JSTL library was used, and more precisely the <em>fmt</em> tags: <em>setLocale</em> and <em>setBundle</em> were used, thanks to which the files with correct translation are connected with the page. This allows the use of the message tag with the <em>key</em> parameter - a mapping in the file to the translated phrase.</p>
<p>One of the project’s flaws is missing i18n for admin news. This feature was missed out during the project and implementation phase. The design also looks a bit old, as this project is one of the older ones.</p>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/en/tags/web/">#web</a><a href="/en/tags/cms/">#cms</a><a href="/en/tags/documentation/">#documentation</a><a href="/en/tags/application/">#application</a><a href="/en/tags/database/">#database</a><a href="/en/tags/model/">#model</a></p></article></div></main></div><div class="wrap"><footer><div class="paginator"><a href="/en/articles/splash/" class="next">NEXT</a><a href="/en/articles/latex-custom-fonts/" class="prev">PREV</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 't3r1jj-blog';
if ('en' !== 'en,pl' && 'en' !== 'en') {
    disqus_shortname += '-en'
}
var disqus_identifier = 'en/articles/BookRental/';
var disqus_title = 'BookRental project';
var disqus_url = 'http://T3r1jj.github.io/en/articles/BookRental/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//t3r1jj-blog.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2018 <a href="http://T3r1jj.github.io">T3r1jj</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a>, <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a> and <a href="/en/about/" target="_blank">others</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-73928706-5",'auto');ga('send','pageview');</script></body></html>